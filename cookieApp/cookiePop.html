<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicație Cookie pentru Teodor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(to bottom, #f7e4bc, #f0f0f0);
            cursor:pointer;
        }

        #total {
            font-size: 2.5em;
            font-weight: bold;
            color: #5c4033;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* .cookie {
            position: absolute;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle at 30% 30%, #d2b48c, #cd853f 70%);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3), inset 0 -2px 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out;
           
            clip-path: polygon(
                20% 0%, 100% 0%, 100% 100%, 20% 100%, 
                20% 80%, 0% 60%, 20% 40%
            );
        } */

        .cookie {
            position: absolute;
            width: 80px;
            height: 80px;
            background-image: url('cookie.svg');
            /* Calea către imagine */
            background-size: cover;
            background-position: center;
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
        }

        /* Bucăți de ciocolată */
        /* .cookie::before, .cookie::after {
            content: '';
            position: absolute;
            background-color: #3c2f2f;
            border-radius: 10px;
        } */

        .cookie::before {
            width: 15px;
            height: 10px;
            top: 20px;
            left: 50px;
            transform: rotate(30deg);
        }

        .cookie::after {
            width: 12px;
            height: 8px;
            top: 50px;
            left: 20px;
            transform: rotate(-45deg);
        }

        .cookie:hover {
            transform: scale(1.15) rotate(5deg);
        }

        /* Animație pentru click */
        @keyframes explode {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.5) rotate(10deg);
                opacity: 0.7;
            }

            100% {
                transform: scale(2) rotate(20deg);
                opacity: 0;
            }
        }

        .exploding {
            animation: explode 0.6s ease-out forwards;
        }
    </style>
</head>

<body>
    <div id="total">Total cookies: 0</div>
    <div id="container"></div>

    <script>
        let totalCookies = 0;
        const totalDisplay = document.getElementById('total');
        const container = document.getElementById('container');

        // function createCookie() {
        //     const cookie = document.createElement('div');
        //     cookie.classList.add('cookie');

        //     const x = Math.random() * (window.innerWidth - 80);
        //     const y = Math.random() * (window.innerHeight - 80);
        //     cookie.style.left = `${x}px`;
        //     cookie.style.top = `${y}px`;

        //     cookie.addEventListener('click', () => {
        //         cookie.classList.add('exploding');
        //         setTimeout(() => {
        //             cookie.remove();
        //         }, 600);

        //         totalCookies++;
        //         totalDisplay.textContent = `Total cookies: ${totalCookies}`;

        //         if (totalCookies >= 10) {
        //             resetGame();
        //         }
        //     });

        //     container.appendChild(cookie);
        // }

        function createCookie() {
            const cookie = document.createElement('div');
            cookie.classList.add('cookie');

            // Obținem dimensiunile și poziția elementului #total
            const totalRect = totalDisplay.getBoundingClientRect();
            const totalHeight = totalRect.height + 20; // Adăugăm o margine de siguranță
            const totalWidth = totalRect.width + 20;
            const totalTop = totalRect.top;
            const totalLeft = totalRect.left;

            let x, y;
            do {
                // Generăm poziții aleatorii
                x = Math.random() * (window.innerWidth - 80);
                y = Math.random() * (window.innerHeight - 80);
            } while (
                // Verificăm dacă poziția se suprapune peste #total
                x >= totalLeft - 80 && x <= totalLeft + totalWidth &&
                y >= totalTop - 80 && y <= totalTop + totalHeight
            );

            cookie.style.left = `${x}px`;
            cookie.style.top = `${y}px`;

            cookie.addEventListener('click', () => {
                cookie.classList.add('exploding');
                setTimeout(() => {
                    cookie.remove();
                }, 600);

                totalCookies++;// totalCookies = totalCookies + 1
                totalDisplay.textContent = `Total cookies: ${totalCookies}`;
                console.log("total", totalCookies)
                if (totalCookies >= 10) {
                    resetGame();
                }
            });

            container.appendChild(cookie);
        }

        setInterval(createCookie, 3000);

        function resetGame() {
            setTimeout(() => {
          const latestTotal = totalCookies; //copiem valoarea din totalCookies in latestTotal
            totalCookies = 0;
            totalDisplay.textContent = `Total cookies: ${totalCookies}`;
            const cookies = document.querySelectorAll('.cookie');
            cookies.forEach(c => c.remove());
            console.log("totalCookies", totalCookies)
            alert(`Felicitări! Ai ajuns la ${latestTotal} cookies. Jocul se resetează.`);
            }, 100)
  
        }

        createCookie();
    </script>
</body>

</html>